# AstrBot 基金分析插件

📊 使用 AKShare 开源库获取基金数据，进行分析和展示的 AstrBot 插件。

## 功能特性

- 📈 **实时行情** - 查询LOF基金的实时价格、涨跌幅等信息
- 📊 **技术分析** - 计算移动平均线、趋势判断、波动率等技术指标
- � **量化分析** - 专业量化指标：夏普比率、最大回撤、VaR、策略回测
- 🤖 **AI智能分析** - 结合量化数据和大模型进行深度分析预测
- 📜 **历史数据** - 查看基金历史行情和区间统计
- 🔍 **基金搜索** - 通过关键词搜索LOF基金
- ⚙️ **个人设置** - 设置默认关注的基金

## 安装依赖

本插件需要安装 `akshare` 库：

```bash
pip install akshare
```

或使用 uv：

```bash
uv add akshare
```

## 使用命令

| 命令                     | 说明              | 示例                 |
| ------------------------ | ----------------- | -------------------- |
| `基金 [代码]`            | 查询基金实时行情  | `基金 161226`        |
| `基金分析 [代码]`        | 技术分析          | `基金分析`           |
| `量化分析 [代码]`        | 📊专业量化指标分析 | `量化分析 161226`    |
| `智能分析 [代码]`        | 🤖AI量化深度分析   | `智能分析 161226`    |
| `基金历史 [代码] [天数]` | 查看历史行情      | `基金历史 161226 20` |
| `搜索基金 关键词`        | 搜索LOF基金       | `搜索基金 白银`      |
| `设置基金 代码`          | 设置默认基金      | `设置基金 161226`    |
| `基金帮助`               | 显示帮助信息      | `基金帮助`           |

## 量化分析功能

### 绩效指标
- **累计收益率** - 区间总收益
- **年化收益率** - 年化后的收益率
- **夏普比率** - 风险调整后收益（>1表示较好）
- **索提诺比率** - 只考虑下行风险的收益比
- **卡玛比率** - 年化收益/最大回撤

### 风险指标
- **年化波动率** - 价格波动程度
- **最大回撤** - 历史最大亏损幅度
- **VaR (95%/99%)** - 风险价值，95%概率下的最大日亏损

### 技术指标
- **MACD** - 趋势指标（DIF、DEA、柱状图）
- **RSI** - 相对强弱指标（超买>70，超卖<30）
- **KDJ** - 随机指标
- **布林带** - 上轨、中轨、下轨

### 策略回测
- **MA交叉策略** - 均线金叉买入、死叉卖出
- **RSI策略** - 超卖区反弹买入、超买区卖出
- 回测指标：总收益、年化收益、胜率、盈亏比

## 输出示例

### 实时行情
```
📊 【国投瑞银白银期货(LOF)A】实时行情 📈
━━━━━━━━━━━━━━━━━
💰 最新价: 1.2345
🟢 涨跌额: +0.0123
🟢 涨跌幅: +1.00%
━━━━━━━━━━━━━━━━━
📈 今开: 1.2200
📊 最高: 1.2400
📉 最低: 1.2100
📋 昨收: 1.2222
━━━━━━━━━━━━━━━━━
```

### 量化分析
```
📊 **量化分析报告**

**【绩效分析】**
累计收益: +5.23%
年化收益: +18.45%
年化波动率: 25.67%
最大回撤: 8.32%
夏普比率: 1.25
索提诺比率: 1.58
95% VaR: -2.15%

**【技术指标】**
MA5: 1.2345
MA20: 1.2100
RSI(14): 55.32 (中性)
MACD: 红柱
综合评分: 35 分
**技术信号: 买入**

**【策略回测】**
• MA5/20交叉: 收益 +12.5%, 胜率 60.0%
• RSI(14): 收益 +8.3%, 胜率 55.0%
```

### 自定义提示词

编辑 `ai_analyzer/prompts.py` 文件可以自定义 AI 分析的提示词模板。

## 数据来源

本插件使用 [AKShare](https://github.com/akfamily/akshare) 开源金融数据库，数据来源于东方财富网。

## 免责声明

⚠️ **投资有风险，入市需谨慎！**

本插件仅提供数据查询和技术分析功能，不构成任何投资建议。量化回测基于历史数据，不代表未来表现。投资者应根据自身风险承受能力做出独立判断。

## 许可证

MIT License
